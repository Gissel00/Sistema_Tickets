{"ast":null,"code":"import { Subject, takeUntil } from 'rxjs';\nimport * as helper from '../../core/helpers';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core\";\nimport * as i2 from \"src/app/core/services/status.service\";\nimport * as i3 from \"src/app/shared/loading\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"../../shared/table/table.component\";\nimport * as i6 from \"primeng/dropdown\";\nconst _c0 = function () {\n  return {\n    \"minWidth\": \"30%\"\n  };\n};\nexport class MyTicketsComponent {\n  get getTickets() {\n    return [...this.tickets];\n  }\n  constructor(ticketService, userService, status, loadingService) {\n    this.ticketService = ticketService;\n    this.userService = userService;\n    this.status = status;\n    this.loadingService = loadingService;\n    this.tickets = [];\n    this.destroy$ = new Subject();\n    this.statuses = [];\n    this.selectedStatus = {};\n    this.columns = [{\n      name: 'Id',\n      key: '_id',\n      show: true,\n      routeLink: ['/tickets']\n    }, {\n      name: 'Asunto',\n      key: 'asunto',\n      show: true\n    }, {\n      name: 'Estado',\n      key: 'estado',\n      show: true\n    }, {\n      name: 'Prioridad',\n      key: 'prioridad',\n      show: true\n    }, {\n      name: 'Creador',\n      key: 'creador',\n      show: true\n    }, {\n      name: 'Categoria',\n      key: 'categoria',\n      show: true\n    }, {\n      name: 'Flujo',\n      key: 'flujo',\n      show: true\n    }, {\n      name: 'Creado',\n      key: 'creado_a',\n      show: true\n    }];\n  }\n  ngOnInit() {\n    this.loadingService.setLoading(true);\n    this.userService.populate();\n    this.fetchTickets();\n    this.status.getStatuses().pipe(takeUntil(this.destroy$)).subscribe({\n      next: response => {\n        this.statuses = this.status.materializeStatus(response);\n        this.loadingService.setLoading(false);\n      }\n    });\n  }\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  fetchTickets() {\n    this.ticketService.getTickets().pipe(takeUntil(this.destroy$)).subscribe({\n      next: response => {\n        this.tickets = this.ticketService.materializeResponseToTicket(response);\n      }\n    });\n  }\n  filterByStatus() {\n    if (!helper.isFullObjectAndValue(this.selectedStatus) || helper.isNullOrUndefined(this.selectedStatus)) {\n      return [...this.getTickets];\n    }\n    return [...this.getTickets.filter(ticket => ticket.estado === this.selectedStatus.nombre)];\n  }\n}\nMyTicketsComponent.ɵfac = function MyTicketsComponent_Factory(t) {\n  return new (t || MyTicketsComponent)(i0.ɵɵdirectiveInject(i1.TicketService), i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.StatusService), i0.ɵɵdirectiveInject(i3.LoadingService));\n};\nMyTicketsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MyTicketsComponent,\n  selectors: [[\"app-my-tickets\"]],\n  decls: 11,\n  vars: 11,\n  consts: [[1, \"banner\"], [1, \"text-banner\"], [1, \"container\"], [1, \"card\", \"border-0\", \"shadow\", \"centered-page\"], [1, \"card-body\"], [2, \"padding-bottom\", \"1rem\"], [\"placeholder\", \"Estados\", \"optionLabel\", \"nombre\", \"scrollHeight\", \"300px\", 3, \"options\", \"ngModel\", \"showTransitionOptions\", \"hideTransitionOptions\", \"showClear\", \"ngModelChange\"], [1, \"table-container\", \"overflow-auto\"], [1, \"table-responsive-md\", \"table-sm\", \"table-custom-style\"], [3, \"columns\", \"data\", \"classes\"]],\n  template: function MyTicketsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h3\", 1);\n      i0.ɵɵtext(2, \"Tickets\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4)(6, \"div\", 5)(7, \"p-dropdown\", 6);\n      i0.ɵɵlistener(\"ngModelChange\", function MyTicketsComponent_Template_p_dropdown_ngModelChange_7_listener($event) {\n        return ctx.selectedStatus = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"div\", 7)(9, \"section\", 8);\n      i0.ɵɵelement(10, \"app-table\", 9);\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(7);\n      i0.ɵɵstyleMap(i0.ɵɵpureFunction0(10, _c0));\n      i0.ɵɵproperty(\"options\", ctx.statuses)(\"ngModel\", ctx.selectedStatus)(\"showTransitionOptions\", \"200ms\")(\"hideTransitionOptions\", \"200ms\")(\"showClear\", true);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"columns\", ctx.columns)(\"data\", ctx.filterByStatus())(\"classes\", \"table table-bordered table-striped table-hover\");\n    }\n  },\n  dependencies: [i4.NgControlStatus, i4.NgModel, i5.TableComponent, i6.Dropdown],\n  styles: [\".table-container[_ngcontent-%COMP%]::-webkit-scrollbar {\\n        -webkit-appearance: none;\\n    }\\n    \\n    .table-container[_ngcontent-%COMP%]::-webkit-scrollbar:vertical {\\n        width:10px;\\n    }\\n\\n    .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-button:increment, .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-button {\\n        display: none;\\n    } \\n    \\n    .table-container[_ngcontent-%COMP%]::-webkit-scrollbar:horizontal {\\n        height: 10px;\\n    }\\n    \\n    .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb {\\n        background-color: #797979;\\n        border-radius: 20px;\\n        border: 2px solid #f1f2f3;\\n    }\\n    \\n    .table-container[_ngcontent-%COMP%]::-webkit-scrollbar-track {\\n        border-radius: 10px;  \\n    }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvbXktdGlja2V0cy9teS10aWNrZXRzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0lBQ0k7UUFDSSx3QkFBd0I7SUFDNUI7O0lBRUE7UUFDSSxVQUFVO0lBQ2Q7O0lBRUE7UUFDSSxhQUFhO0lBQ2pCOztJQUVBO1FBQ0ksWUFBWTtJQUNoQjs7SUFFQTtRQUNJLHlCQUF5QjtRQUN6QixtQkFBbUI7UUFDbkIseUJBQXlCO0lBQzdCOztJQUVBO1FBQ0ksbUJBQW1CO0lBQ3ZCIiwic291cmNlc0NvbnRlbnQiOlsiXG4gICAgLnRhYmxlLWNvbnRhaW5lcjo6LXdlYmtpdC1zY3JvbGxiYXIge1xuICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XG4gICAgfVxuICAgIFxuICAgIC50YWJsZS1jb250YWluZXI6Oi13ZWJraXQtc2Nyb2xsYmFyOnZlcnRpY2FsIHtcbiAgICAgICAgd2lkdGg6MTBweDtcbiAgICB9XG5cbiAgICAudGFibGUtY29udGFpbmVyOjotd2Via2l0LXNjcm9sbGJhci1idXR0b246aW5jcmVtZW50LC50YWJsZS1jb250YWluZXI6Oi13ZWJraXQtc2Nyb2xsYmFyLWJ1dHRvbiB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgfSBcbiAgICBcbiAgICAudGFibGUtY29udGFpbmVyOjotd2Via2l0LXNjcm9sbGJhcjpob3Jpem9udGFsIHtcbiAgICAgICAgaGVpZ2h0OiAxMHB4O1xuICAgIH1cbiAgICBcbiAgICAudGFibGUtY29udGFpbmVyOjotd2Via2l0LXNjcm9sbGJhci10aHVtYiB7XG4gICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM3OTc5Nzk7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IDIwcHg7XG4gICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICNmMWYyZjM7XG4gICAgfVxuICAgIFxuICAgIC50YWJsZS1jb250YWluZXI6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDsgIFxuICAgIH1cbiAgIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["Subject","takeUntil","helper","MyTicketsComponent","getTickets","tickets","constructor","ticketService","userService","status","loadingService","name","key","show","routeLink","ngOnInit","setLoading","populate","fetchTickets","getStatuses","pipe","destroy$","subscribe","next","response","statuses","materializeStatus","ngOnDestroy","complete","materializeResponseToTicket","filterByStatus","isFullObjectAndValue","selectedStatus","isNullOrUndefined","filter","ticket","estado","nombre","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["C:\\Users\\nayeli\\OneDrive\\Escritorio\\service-desk\\frontend\\src\\app\\pages\\my-tickets\\my-tickets.component.ts","C:\\Users\\nayeli\\OneDrive\\Escritorio\\service-desk\\frontend\\src\\app\\pages\\my-tickets\\my-tickets.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { TicketService, UserService } from 'src/app/core';\r\nimport { ColumnTable } from 'src/app/core/interfaces/sidebar.links.interface';\r\nimport { Status } from 'src/app/core/interfaces/status.interface';\r\nimport { Ticket } from 'src/app/core/interfaces/ticket.interface';\r\nimport { StatusService } from 'src/app/core/services/status.service';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport * as helper from '../../core/helpers';\r\nimport { LoadingService } from 'src/app/shared/loading';\r\n\r\n@Component({\r\n  selector: 'app-my-tickets',\r\n  templateUrl: './my-tickets.component.html',\r\n  styles: [`\r\n    .table-container::-webkit-scrollbar {\r\n        -webkit-appearance: none;\r\n    }\r\n    \r\n    .table-container::-webkit-scrollbar:vertical {\r\n        width:10px;\r\n    }\r\n\r\n    .table-container::-webkit-scrollbar-button:increment,.table-container::-webkit-scrollbar-button {\r\n        display: none;\r\n    } \r\n    \r\n    .table-container::-webkit-scrollbar:horizontal {\r\n        height: 10px;\r\n    }\r\n    \r\n    .table-container::-webkit-scrollbar-thumb {\r\n        background-color: #797979;\r\n        border-radius: 20px;\r\n        border: 2px solid #f1f2f3;\r\n    }\r\n    \r\n    .table-container::-webkit-scrollbar-track {\r\n        border-radius: 10px;  \r\n    }\r\n  `],\r\n})\r\nexport class MyTicketsComponent implements OnInit {\r\n  private tickets: Ticket[] = [];\r\n  private destroy$: Subject<void> = new Subject<void>();\r\n  get getTickets(): Ticket[] {\r\n    return [...this.tickets];\r\n  }\r\n\r\n  statuses: Status[] = [];\r\n  selectedStatus: Status = {} as Status;\r\n\r\n  constructor(\r\n    private ticketService: TicketService,\r\n    private userService: UserService,\r\n    private status: StatusService,\r\n    private loadingService: LoadingService,\r\n\r\n  ) {}\r\n  columns: ColumnTable[] = [\r\n    {\r\n      name: 'Id',\r\n      key: '_id',\r\n      show: true,\r\n      routeLink: ['/tickets'],\r\n    },\r\n    {\r\n      name: 'Asunto',\r\n      key: 'asunto',\r\n      show: true,\r\n    },\r\n    {\r\n      name: 'Estado',\r\n      key: 'estado',\r\n      show: true,\r\n    },\r\n    {\r\n      name: 'Prioridad',\r\n      key: 'prioridad',\r\n      show: true,\r\n    },\r\n    {\r\n      name: 'Creador',\r\n      key: 'creador',\r\n      show: true,\r\n    },\r\n    {\r\n      name: 'Categoria',\r\n      key: 'categoria',\r\n      show: true,\r\n    },\r\n    {\r\n      name: 'Flujo',\r\n      key: 'flujo',\r\n      show: true,\r\n    },\r\n    {\r\n      name: 'Creado',\r\n      key: 'creado_a',\r\n      show: true,\r\n    },\r\n  ];\r\n\r\n  ngOnInit(): void {\r\n    this.loadingService.setLoading(true);\r\n    this.userService.populate();\r\n    this.fetchTickets();\r\n    this.status\r\n      .getStatuses()\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (response) => {\r\n          this.statuses = this.status.materializeStatus(response);\r\n          this.loadingService.setLoading(false);\r\n        },\r\n      });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy$.next();\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  fetchTickets(): void {\r\n    this.ticketService\r\n      .getTickets()\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe({\r\n        next: (response) => {\r\n          this.tickets =\r\n            this.ticketService.materializeResponseToTicket(response);\r\n        },\r\n      });\r\n  }\r\n\r\n  filterByStatus(): Ticket[] {\r\n    if (\r\n      !helper.isFullObjectAndValue(this.selectedStatus) ||\r\n      helper.isNullOrUndefined(this.selectedStatus)\r\n    ) {\r\n      return [...this.getTickets];\r\n    }\r\n    return [\r\n      ...this.getTickets.filter(\r\n        (ticket) => ticket.estado === this.selectedStatus.nombre\r\n      ),\r\n    ];\r\n  }\r\n}\r\n","<div class=\"banner\">\r\n  <h3 class=\"text-banner\">Tickets</h3>\r\n</div>\r\n<div class=\"container\">\r\n\r\n  <div class=\"card border-0 shadow centered-page\">\r\n  \r\n\r\n  <div class=\"card-body\"> \r\n    <div style=\"padding-bottom: 1rem;\">\r\n      <p-dropdown [style]=\"{'minWidth':'30%'}\" \r\n        [options]=\"statuses\"\r\n        [(ngModel)]=\"selectedStatus\"\r\n        placeholder=\"Estados\"\r\n        optionLabel=\"nombre\"\r\n        [showTransitionOptions]=\"'200ms'\"\r\n        [hideTransitionOptions]=\"'200ms'\"\r\n        [showClear]=\"true\"\r\n        scrollHeight=\"300px\"\r\n      >\r\n      </p-dropdown>\r\n    </div>\r\n\r\n    <div class=\"table-container overflow-auto\">\r\n      <section class=\"table-responsive-md table-sm table-custom-style\">\r\n        <app-table\r\n          [columns]=\"columns\"\r\n          [data]=\"filterByStatus()\"\r\n          [classes]=\"'table table-bordered table-striped table-hover'\"\r\n        ></app-table>\r\n      </section>\r\n    </div>\r\n    \r\n  </div>\r\n</div>\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}